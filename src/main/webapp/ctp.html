<!DOCTYPE html>
<html>
<head>
    <title>Cryptotrading Places</title>
    <meta charset="utf-8">

    <link rel="stylesheet" type="text/css" href="jquery/jquery.css">
    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap-select.min.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="jquery-ui/css/smoothness/jquery-ui.css">
    <link type="text/css" rel="stylesheet" media="all" href="css/overwrite_jquery.css"/>

    <script src="jquery/jquery-2.1.3.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script src="bootstrap/js/bootstrap-select.min.js"></script>
    <script src="angular/angular.min.js"></script>
    <script src="jquery-ui/js/jquery-ui.js"></script>

    <script language="javascript" type="text/javascript" src="jquery.jqplot.min.js"></script>
    <script type="text/javascript" src="syntaxhighlighter/scripts/shCore.js"></script>
    <script type="text/javascript" src="syntaxhighlighter/scripts/shBrushJScript.js"></script>
    <script type="text/javascript" src="syntaxhighlighter/scripts/shBrushXml.js"></script>
    <link type="text/css" rel="stylesheet" href="syntaxhighlighter/styles/shCoreDefault.css"/>
    <link type="text/css" rel="stylesheet" href="syntaxhighlighter/styles/shThemejqPlot.css"/>
    <link rel="stylesheet" type="text/css" href="jqplot/jquery.jqplot.min.css" />

    <!-- jqPlot renderers and plugins -->

    <script type="text/javascript" src="plugins/jqplot.highlighter.min.js"></script>
    <script type="text/javascript" src="plugins/jqplot.cursor.min.js"></script>
    <script type="text/javascript" src="plugins/jqplot.dateAxisRenderer.min.js"></script>
    <script type="text/javascript" src="plugins/jqplot.dateAxisRenderer.min.js"></script>
    <script type="text/javascript" src="plugins/jqplot.canvasTextRenderer.min.js"></script>
    <script type="text/javascript" src="plugins/jqplot.canvasAxisTickRenderer.min.js"></script>
    <script type="text/javascript" src="plugins/jqplot.pointLabels.min.js"></script>
    <script type="text/javascript" src="plugins/jqplot.enhancedLegendRenderer.js"></script>


</head>

<body>

<div ng-app="cryptoTrading" ng-controller="mainController">
    <div align="center"><h1>Crypto trading places (Handel)</h1></div>

    <div align="center">
        <h3>
            {{tradingAsText}} : {{currentRate}}
        </h3>
    </div>

    <!--
        Menu
    -->
    <div align="center">
        <div class="btn-group btn-toolbar" role="group">
            <button type="button" class="btn btn-primary" ng-click="clickReCalculate()"> Herbereken <span class="glyphicon glyphicon-refresh"></span></button>
            <button type="button" class="btn btn-primary" ng-click="clickGraph()"> Grafiek <span class="glyphicon glyphicon-stats"></span></button>
            <button type="button" class="btn btn-primary" ng-click="clickWallet()"> Wallet <span class="glyphicon glyphicon-bitcoin"></span></button>
            <button type="button" class="btn btn-primary" ng-click="clickOrders()"> Orders <span class="glyphicon glyphicon-briefcase"></span></button>
        </div>
    </div>

    <!--
     Wallet menu option
    -->
    <div ng-show="menuOption == 'showWallet'" align="center" ng-controller="walletController">
        <h4>Wallet</h4>
        <table>
            <tr>
                <td width="200"><h4>Munten :</h4></td>
                <td><h4>{{ wallet.coins }} {{ currency.code }}</h4></td>
            </tr>
            <tr>
                <td><h4>Cryptocoins :</h4></td>
                <td><h4>{{ wallet.cryptoCoins }} {{ cryptoCurrency.code }}</h4></td>
            </tr>
        </table>

        <h4>Wallet historie</h4>
        <table>
            <tr>
                <th width="150">Datum en tijd</th>
                <th width="120">Munten</th>
                <th width="130">Crypto munten</th>
                <th width="100">Koers</th>
                <th width="200">Totale waarde</th>
            </tr>
            <tr ng-repeat="walletHistory in walletHistories">
                <td>{{ walletHistory.timestamp | date: "dd-M-yyyy - hh:mm:ss uur" }}</td>
                <td>{{ walletHistory.coins }}</td>
                <td>{{ walletHistory.cryptoCoins }}</td>
                <td>{{ walletHistory.exchangeRate }}</td>
                <td>{{ walletHistory.totalValue }}</td>
            </tr>
        </table>
    </div>

    <!--
       Market orders menu option
     -->
    <div ng-show="menuOption == 'showOrders'" align="center" ng-controller="orderController">
        <h4>Market Orders</h4>

        <table>
            <tr>
                <th width="150">Datum en tijd</th>
                <th width="80">Index</th>
                <th width="100">Order type</th>
                <th width="170">Order nummer</th>
                <th width="100">Munten</th>
                <th width="120">Crypto munten</th>
                <th width="120">Koers</th>
                <th width="100">Commissie</th>
                <th width="200">Status</th>
            </tr>
            <tr ng-repeat="order in marketOrders">
                <td>{{ order.timestamp | date: "dd-M-yyyy - hh:mm:ss uur" }}</td>
                <td>{{ order.index }}</td>
                <td>{{ order.type | orderType }}</td>
                <td>{{ order.orderReference }}</td>
                <td>{{ currency.symbol }} {{ order.coins | number: 2}}</td>
                <td>{{ cryptoCurrency.symbol }} {{ order.cryptoCoins | number: 5}}</td>
                <td>{{ order.exchangeRate }} {{ currency.symbol}} / {{ cryptoCurrency.symbol }}</td>
                <td>{{ currency.symbol }} {{ order.fee }}</td>
                <td>{{ order.status | orderStatus }}</td>
            </tr>
        </table>
    </div>

    <!--
       Graph menu option
     -->
    <div ng-show="menuOption == 'showGraph'" align="center" ng-controller="graphController">
        <h4>Grafiek</h4>

    </div>

    <!--
     Recalc trends and signals menu option
    -->
    <div ng-show="menuOption == 'recalculate'" align="center" ng-controller="recalculateController">
        <h4>Herbereken trends en signalen</h4>
        <br/>

        <div id="progressbar" class="progress">
            <div align="center"><b> {{ progress }} % </b></div>
        </div>

        <table>
            <tr>
                <td width="60">MA</td>
                <td width="400">{{ calculationStatus.MaCalculation.status }}</td>
                <td width="40">{{ calculationStatus.MaCalculation.progress }} %</td>
            </tr>
            <tr>
                <td>EMA</td>
                <td>{{ calculationStatus.EmaCalculation.status }}</td>
                <td>{{ calculationStatus.EmaCalculation.progress }} %</td>
            </tr>
            <tr>
                <td>SMA</td>
                <td>{{ calculationStatus.SmaCalculation.status }}</td>
                <td>{{ calculationStatus.SmaCalculation.progress }} %</td>
            </tr>
            <tr>
                <td>MACD</td>
                <td>{{ calculationStatus.MacdCalculation.status }}</td>
                <td>{{ calculationStatus.MacdCalculation.progress }} %</td>
            </tr>
            <tr>
                <td>Signaal</td>
                <td>{{ calculationStatus.SignalCalculation.status }}</td>
                <td>{{ calculationStatus.SignalCalculation.progress }} %</td>
            </tr>
        </table>
    </div>
</div>
</div>

<div id="chart_macd" style="height:300px; width:1000px;">grafiek</div>
<button class="button-reset">Reset Zoom</button>


</body>

<script>

    // Angular filter type for Order Type
    angular.module('orderTypeFilter', []).filter('orderType', function () {
        return function (input) {
            if (input == 'SELL') {
                return 'Verkoop'
            }
            else {
                return 'Koop';
            }
        };
    });

    // Angular filter type for order status
    angular.module('orderStatusFilter', []).filter('orderStatus', function () {
        return function (input) {
            switch (input) {
                case  'EXECUTED'   :
                    return 'Uitgevoerd';
                case  'EXECUTING'  :
                    return 'In uitvoering';
                case  'CANCELLED'  :
                    return 'Afgebroken';
                case  'PARTLYEXEC' :
                    return 'Gedeeltelijk uitgevoerd';
                case  'OPEN'       :
                    return 'Open';
                case  'RETRY'      :
                    return 'Herhaal';
                case  'ERROR'      :
                    return 'Fout opgetreden';
                default :
                    return '-';
            }
        };
    });

    // Register filter
    var app = angular.module("cryptoTrading", ['orderTypeFilter', 'orderStatusFilter']);

    // main controller for the One Page Application
    app.controller("mainController", function ($scope, $interval, $http) {

        // get current trading
        var promise = $http.get('rest/getCurrentTrading').
                success(function (data) {
                    $scope.trading = data;
                });

        // Wait until promise of getting current trade is finished.
        promise.then(function () {

            // get trading site as text
            $http.get('rest/getTradingAsStringText/' + $scope.trading.id).
                    success(function (data) {
                        $scope.tradingAsText = data;
                    });

            // get current crypto trading rate
            $http.get('rest/currentCryptoRate/' + $scope.trading.id).
                    success(function (data) {
                        $scope.currentRate = data;
                    });

            $scope.currency = $scope.trading.tradePair.currency;
            $scope.cryptoCurrency = $scope.trading.tradePair.cryptoCurrency;
        });


        //Click wallet menu option
        $scope.clickWallet = function () {
            $scope.menuOption = "showWallet";
            $scope.$broadcast('clickWalletEvent');
        }

        //Click orders menu option
        $scope.clickOrders = function () {
            $scope.menuOption = "showOrders";
            $scope.$broadcast('clickOrdersEvent');
        }

        //Click graph option
        $scope.clickGraph = function () {
            $scope.menuOption = "showGraph";
            $scope.$broadcast('clickGraphEvent');
        }

        //Click recalculate option
        $scope.clickReCalculate = function () {
            $scope.menuOption = "recalculate";
            $scope.$broadcast('clickRecalculateEvent');
        }
    })


    // Wallet controller
    app.controller("walletController", function ($scope, $http) {

        // Menu option wallet clicked, get wallet
        $scope.$on('clickWalletEvent', function () {

            $http.get('rest/getWallet/' + $scope.trading.id).
                    success(function (data) {
                        $scope.wallet = data;
                    });

            $http.get('rest/getWalletHistory/' + $scope.trading.id).
                    success(function (data) {
                        $scope.walletHistories = data;
                    });
        });
    });


    // Order controller
    app.controller("orderController", function ($scope, $http) {

        // Menu option orders clicked, get market orders
        $scope.$on('clickOrdersEvent', function () {

            $http.get('rest/marketOrders/' + $scope.trading.id).
                    success(function (data) {
                        $scope.marketOrders = data;
                    });
        });

        // Determine Order Type
        $scope.getOrderType = function (order) {

            if (order instanceof BuyMarketOrder) {
                return "Koop";
            }
            else {
                return "Verkoop";
            }
        }
    });

    // Graphs controller
    app.controller("graphController", function ($scope) {

        // Menu option graph clicked, show graph
        $scope.$on('clickGraphEvent', function () {

        });
    });


    // Recalculate controller
    app.controller("recalculateController", function ($scope, $http, $interval) {

        // Menu option graph clicked, show graph
        $scope.$on('clickRecalculateEvent', function () {
            $scope.progress = 0;

            $http.post('rest/recalculate/' + $scope.trading.id);

            // Monitor the progress
            $scope.intervalPromise = $interval(function () {

                // get calculculation status
                $http.get('rest/calculationStatus/').
                        success(function (data) {

                            $scope.calculationStatus = data;

                            $scope.progress = (data.MaCalculation.progress +
                                    data.EmaCalculation.progress +
                                    data.SmaCalculation.progress +
                                    data.MacdCalculation.progress +
                                    data.SignalCalculation.progress) / 5;
                        });

                $("#progressbar").progressbar({value: $scope.progress});

                if ($scope.progress >= 100) {
                    $interval.cancel($scope.intervalPromise);
                }
            }, 1000);
        });
    });


</script>



<script>

    var EMA50EMA150=[[67052,-0.048,null],[67053,-0.053,null],[67054,-0.057,null],[67055,-0.053,null],[67056,-0.047,null],[67057,-0.04,null],[67058,-0.035,null],[67059,-0.03,null],[67060,-0.032,null],[67061,-0.047,null],[67062,-0.048,null],[67063,-0.038,null],[67064,-0.023,null],[67065,-0.033,null],[67066,-0.024,null],[67067,-0.015,null],[67068,-0.012,null],[67069,-0.011,null],[67070,-0.005,null],[67071,0,null],[67072,0.015,null],[67073,0.009,null],[67074,0.009,null],[67075,0.008,null],[67076,0.018,null],[67077,0.04,null],[67078,0.055,null],[67079,0.061,null],[67080,0.067,null],[67081,0.078,null],[67082,0.087,null],[67083,0.102,null],[67084,0.119,null],[67085,0.122,null],[67086,0.133,null],[67087,0.142,null],[67088,0.15,null],[67089,0.157,null],[67090,0.164,null],[67091,0.155,null],[67092,0.146,null],[67093,0.149,null],[67094,0.155,null],[67095,0.161,null],[67096,0.156,null],[67097,0.151,null],[67098,0.154,null],[67099,0.16,null],[67100,0.165,null],[67101,0.176,null],[67102,0.186,null],[67103,0.189,null],[67104,0.2,null],[67105,0.203,null],[67106,0.207,null],[67107,0.198,null],[67108,0.193,null],[67109,0.19,null],[67110,0.187,null],[67111,0.185,null],[67112,0.182,null],[67113,0.169,null],[67114,0.157,null],[67115,0.155,null],[67116,0.148,null],[67117,0.141,null],[67118,0.134,null],[67119,0.128,null],[67120,0.128,null],[67121,0.128,null],[67122,0.127,null],[67123,0.127,null],[67124,0.127,null],[67125,0.129,null],[67126,0.139,null],[67127,0.131,null],[67128,0.14,null],[67129,0.149,null],[67130,0.157,null],[67131,0.164,null],[67132,0.155,null],[67133,0.146,null],[67134,0.138,null],[67135,0.13,null],[67136,0.139,null],[67137,0.148,null],[67138,0.155,null],[67139,0.177,null],[67140,0.209,null],[67141,0.247,null],[67142,0.312,null],[67143,0.36,null],[67144,0.409,null],[67145,0.472,null],[67146,0.532,null],[67147,0.589,null],[67148,0.628,null],[67149,0.673,null],[67150,0.707,null],[67151,0.741,null],[67152,0.772,null],[67153,0.801,null],[67154,0.825,null],[67155,0.848,null],[67156,0.852,null],[67157,0.873,null],[67158,0.887,null],[67159,0.905,null],[67160,0.919,null],[67161,0.932,null],[67162,0.946,null],[67163,0.969,null],[67164,0.993,null],[67165,1,null],[67166,1.017,null],[67167,1.032,null],[67168,1.037,null],[67169,1.042,null],[67170,1.054,null],[67171,1.063,null],[67172,1.07,null],[67173,1.076,null],[67174,1.081,null],[67175,1.085,null],[67176,1.088,null],[67177,1.091,null],[67178,1.089,null],[67179,1.082,null],[67180,1.074,null],[67181,1.067,null],[67182,1.059,null],[67183,1.054,null],[67184,1.037,null],[67185,1.018,null],[67186,1.012,null],[67187,0.993,null],[67188,0.971,null],[67189,0.967,null],[67190,0.961,null],[67191,0.946,null],[67192,0.925,null],[67193,0.916,null],[67194,0.893,null],[67195,0.889,null],[67196,0.884,null],[67197,0.885,null],[67198,0.888,null],[67199,0.903,null],[67200,0.918,null],[67201,0.931,null],[67202,0.96,null],[67203,0.978,null],[67204,0.974,null],[67205,0.964,null],[67206,0.933,null],[67207,0.914,null],[67208,0.889,null],[67209,0.878,null],[67210,0.85,null],[67211,0.829,null],[67212,0.809,null],[67213,0.801,null],[67214,0.775,null],[67215,0.757,null],[67216,0.745,null],[67217,0.733,null],[67218,0.721,null],[67219,0.709,null],[67220,0.697,null],[67221,0.687,null],[67222,0.677,null],[67223,0.667,null],[67224,0.657,null],[67225,0.647,null],[67226,0.637,null],[67227,0.633,null],[67228,0.629,null],[67229,0.618,null],[67230,0.607,null],[67231,0.596,null],[67232,0.597,null],[67233,0.599,null],[67234,0.576,null],[67235,0.572,null],[67236,0.568,null],[67237,0.569,null],[67238,0.565,null],[67239,0.565,null],[67240,0.565,null],[67241,0.566,null],[67242,0.566,null],[67243,0.566,null],[67244,0.561,null],[67245,0.555,null],[67246,0.549,null],[67247,0.524,null],[67248,0.5,null],[67249,0.481,null],[67250,0.481,null],[67251,0.475,null],[67252,0.469,null],[67253,0.455,null],[67254,0.443,null],[67255,0.431,null],[67256,0.419,null],[67257,0.402,null],[67258,0.382,null],[67259,0.363,null],[67260,0.357,null],[67261,0.351,null],[67262,0.345,null],[67263,0.34,null],[67264,0.335,null],[67265,0.321,null],[67266,0.308,null],[67267,0.3,null],[67268,0.287,null],[67269,0.275,null],[67270,0.279,null],[67271,0.282,null],[67272,0.285,null],[67273,0.287,null],[67274,0.276,null],[67275,0.264,null],[67276,0.253,null],[67277,0.242,null],[67278,0.231,null],[67279,0.216,null],[67280,0.204,null],[67281,0.193,null],[67282,0.182,null],[67283,0.168,null],[67284,0.155,null],[67285,0.14,null],[67286,0.126,null],[67287,0.115,null],[67288,0.102,null],[67289,0.092,null],[67290,0.082,null],[67291,0.073,null],[67292,0.065,null],[67293,0.057,null],[67294,0.05,null],[67295,0.042,null],[67296,0.032,null],[67297,0.021,null],[67298,0.014,null],[67299,0.008,null],[67300,0.002,null],[67301,-0.004,null],[67302,-0.009,null],[67303,-0.016,null],[67304,-0.031,null],[67305,-0.035,null],[67306,-0.039,null],[67307,-0.06,null],[67308,-0.08,null],[67309,-0.082,null],[67310,-0.084,null],[67311,-0.086,null],[67312,-0.103,null],[67313,-0.119,null],[67314,-0.114,null],[67315,-0.128,null],[67316,-0.124,null],[67317,-0.12,null],[67318,-0.116,null],[67319,-0.113,null],[67320,-0.11,null],[67321,-0.109,null],[67322,-0.11,null],[67323,-0.102,null],[67324,-0.091,null],[67325,-0.081,null],[67326,-0.069,null],[67327,-0.08,null],[67328,-0.082,null],[67329,-0.084,null],[67330,-0.072,null],[67331,-0.06,null],[67332,-0.048,null],[67333,-0.037,null],[67334,-0.027,null],[67335,-0.017,null],[67336,-0.007,null],[67337,0.002,null],[67338,0.01,null],[67339,0.019,null],[67340,0.015,null],[67341,0.021,null],[67342,0.014,null],[67343,0.008,null],[67344,0.014,null],[67345,0.03,null],[67346,0.046,null],[67347,0.05,null],[67348,0.054,null],[67349,0.058,null],[67350,0.07,null],[67351,0.073,null],[67352,0.075,null],[67353,0.077,null],[67354,0.072,null],[67355,0.084,null],[67356,0.095,null],[67357,0.104,null],[67358,0.113,null],[67359,0.122,null],[67360,0.13,null],[67361,0.138,null],[67362,0.144,null],[67363,0.149,null],[67364,0.148,null],[67365,0.154,null],[67366,0.159,null],[67367,0.157,null],[67368,0.162,null],[67369,0.166,null],[67370,0.17,null],[67371,0.174,null],[67372,0.178,null],[67373,0.174,null],[67374,0.18,null],[67375,0.176,null],[67376,0.172,null],[67377,0.168,null],[67378,0.174,null],[67379,0.18,null],[67380,0.185,null],[67381,0.19,null],[67382,0.195,null],[67383,0.2,null],[67384,0.204,null],[67385,0.208,null],[67386,0.211,null],[67387,0.214,null],[67388,0.217,null],[67389,0.22,null],[67390,0.233,null],[67391,0.248,null],[67392,0.275,null],[67393,0.296,null],[67394,0.319,null],[67395,0.333,null],[67396,0.354,null],[67397,0.374,null],[67398,0.392,null],[67399,0.409,null],[67400,0.425,null],[67401,0.44,null],[67402,0.464,null],[67403,0.485,null],[67404,0.502,null],[67405,0.52,null],[67406,0.538,null],[67407,0.554,null],[67408,0.564,null],[67409,0.573,null],[67410,0.581,null],[67411,0.589,null],[67412,0.585,null],[67413,0.591,null],[67414,0.597,null],[67415,0.6,null],[67416,0.603,null],[67417,0.605,null],[67418,0.598,null],[67419,0.599,null],[67420,0.6,null],[67421,0.601,null],[67422,0.604,null],[67423,0.596,null],[67424,0.588,null],[67425,0.596,null],[67426,0.603,null],[67427,0.61,null],[67428,0.601,null],[67429,0.595,null],[67430,0.596,null],[67431,0.597,null],[67432,0.597,null],[67433,0.596,null],[67434,0.595,null],[67435,0.595,null],[67436,0.594,null],[67437,0.593,null],[67438,0.59,null],[67439,0.578,null],[67440,0.566,null],[67441,0.554,null],[67442,0.551,null],[67443,0.543,null],[67444,0.531,null],[67445,0.523,null],[67446,0.515,null],[67447,0.507,null],[67448,0.504,null],[67449,0.5,null],[67450,0.496,null],[67451,0.493,null],[67452,0.488,null],[67453,0.484,null],[67454,0.478,null],[67455,0.472,null],[67456,0.464,null],[67457,0.453,null],[67458,0.447,null],[67459,0.441,null],[67460,0.433,null],[67461,0.421,null],[67462,0.409,null],[67463,0.397,null],[67464,0.379,null],[67465,0.359,null],[67466,0.34,null],[67467,0.322,null],[67468,0.316,null],[67469,0.31,null],[67470,0.308,null],[67471,0.31,null],[67472,0.311,null],[67473,0.312,null],[67474,0.313,null],[67475,0.316,null],[67476,0.317,null],[67477,0.318,null],[67478,0.319,null],[67479,0.32,null],[67480,0.321,null],[67481,0.309,null],[67482,0.311,null],[67483,0.313,null],[67484,0.298,null],[67485,0.284,null],[67486,0.284,null],[67487,0.284,null],[67488,0.284,null],[67489,0.27,null],[67490,0.257,null],[67491,0.244,null],[67492,0.232,null],[67493,0.22,null],[67494,0.209,null],[67495,0.2,null],[67496,0.188,null],[67497,0.193,null],[67498,0.197,null],[67499,0.2,null],[67500,0.205,null],[67501,0.209,null],[67502,0.213,null],[67503,0.203,null],[67504,0.206,null],[67505,0.208,null],[67506,0.206,null],[67507,0.209,null],[67508,0.198,null],[67509,0.201,null],[67510,0.203,null],[67511,0.204,null],[67512,0.207,null],[67513,0.196,null],[67514,0.182,null],[67515,0.162,null],[67516,0.149,null],[67517,0.15,null],[67518,0.156,null],[67519,0.141,null],[67520,0.127,null],[67521,0.115,null],[67522,0.104,null],[67523,0.095,null],[67524,0.103,null],[67525,0.111,null],[67526,0.118,null],[67527,0.127,null],[67528,0.135,null],[67529,0.143,null],[67530,0.15,null],[67531,0.157,null],[67532,0.164,null],[67533,0.17,null],[67534,0.176,null],[67535,0.181,null],[67536,0.196,null],[67537,0.211,null],[67538,0.223,null],[67539,0.234,null],[67540,0.245,null],[67541,0.255,null],[67542,0.269,null],[67543,0.277,null],[67544,0.284,null],[67545,0.292,null],[67546,0.304,null],[67547,0.307,null],[67548,0.318,null],[67549,0.324,null],[67550,0.32,null],[67551,0.328,null],[67552,0.336,null]];

</script>

<script class="code" type="text/javascript">

    $(document).ready(function(){

        var plot = $.jqplot('chart_macd', [EMA50EMA150  ],{
            title:'MACD data: Kraken (Bitcoin/Euro)',
            seriesDefaults: {
                showMarker:false
            },
            axesDefaults: {
                tickRenderer: $.jqplot.CanvasAxisTickRenderer ,
                tickOptions: {
                    angle: -45,
                    fontSize: '8pt'
                }
            },
            legend:{
                renderer: $.jqplot.EnhancedLegendRenderer,
                show:true,
                placement: 'outside'
            },
            series: [{label: 'EMA50EMA150', xaxis:'x2axis'}],
            seriesDefaults: {
                lineWidth: 1,
                showMarker:false,
                pointLabels:{ show:true,
                    location:'n',
                    ypadding:3 }
            },
            axes:{
                xaxis:{
                    autoscale : false,
                    syncTicks : true,
                    min :'2015-08-31 10:27:03',
                    max :'2015-08-31 18:47:03',
                    renderer:$.jqplot.DateAxisRenderer,
                    tickOptions:{
                        formatString:'%Y-%m-%d %H:%M:%S'
                    }
                },
                x2axis:{
                    autoscale : false,
                    syncTicks : true,
                    min :67052,
                    max :67552,
                    tickRenderer: $.jqplot.CanvasAxisTickRenderer,
                    tickOptions: {
                        formatString:'%d',
                        angle: -45,
                        fontSize: '8pt'
                    }
                },
                yaxis:{
                    pad: 1.3,
                    tickOptions:{
                        formatString:'%.2f'
                    }
                }
            },
            highlighter: {
                show: true,
                sizeAdjust: 7.5
            },
            cursor: {
                show: true,
                zoom:true,
                showHorizontalLine : true,
                showVerticalLine : true
            }
        });

        $('.button-reset').click(function() { plot.resetZoom() });
    });
</script>

</html>
